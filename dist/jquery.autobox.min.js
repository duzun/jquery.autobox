/** Autogrow Textareas while typing
 *
 * https://github.com/duzun/jquery.autobox
 *
 * Copyright (c) 2015 Dumitru Uzun
 *
 * @license MIT
 * @version 2.0.0 - 2015-04-10
 * @author DUzun.Me
 */
!function(a){"use strict";function b(a,b){return(!a||(b=parseInt(a,10))&&18>b)&&(a="18px"),a}function c(a){return a.filter(m).add(a.find(m))}function d(a){var b=q(this),c=b.get(0),e=b.outerWidth(),f=b.outerHeight();if(a)j&&j!==c&&d.call(j),k=e,l=f,j=c;else if(j===c&&(l!=f||k!=e))return b.trigger("resize"),k=e,l=f,!0}function e(a){function c(){if(i.data("_ab_origs")){n=h.rows;for(var a=h.scrollHeight,b=h.offsetHeight,f=0,g=a-b,j=b,k=n;f!=g&&a&&b;)if(f=g,g>0&&(i.prop("rows",Math.max(++n,(a*n/b>>0)-1,e)),a=h.scrollHeight,b=h.offsetHeight,g=a-b,k!=h.rows&&j==b)){i.prop("rows",k);break}g>5&&j!=b&&setTimeout(c,11),d.call(i)}}var e,f,g,h=this,i=q(h),j=i.data(),k=h.style,l=i.val(),m=l.split("\n"),n=i.prop("rows"),o=i.prop("cols"),p=0;for(d.call(i,!0),f=0,e=m.length;e>f;f++)(g=m[f].length)>p&&(p=g);if(j._ab_origs)j=j._ab_origs,delete j.rest;else{if(i.stop(!0),j=j._ab_origs=[n,o,k.height||i.css("height"),k.width||i.css("width"),i.css("overflow-y"),i.css("overflow-x"),i.css("resize")],j.aw=i.attr("width"),j.ah=i.attr("height"),f=0,j.ah||(f|=1),j.aw||(f|=2),0===f||3===f)switch(i.prop("resize")||i.attr("resize")||j[6]){case"vertical":f=1;break;case"horizontal":f=2}(j.ar=f)&&(1===f&&(i.css({"overflow-y":"hidden"}),!j.aw&&(j.aw=j[3]),delete j.ah),2===f&&(i.css({"overflow-x":"hidden"}),!j.ah&&(j.ah=j[2]),delete j.aw),i.css({resize:"none"})),i.data("_ab_origs",j)}l=l.length,m=j.ah||"auto",g=j.aw||"auto",j.nadj=1&~j.ar,p?(p+=5+(p>>4),e+=n>2||e>1,(e>n||l<j.tl&&1&j.ar)&&i.prop("rows",e)):(1>=e?(e=j[0],m=j[2],j.nadj=!0):e++,p=j[1],g=j[3],1&j.ar&&i.prop("rows",e)),2&j.ar&&i.prop("cols",p).prop("size",p),i.css({height:b(m),width:g}),j.tl=l,j.nadj?d.call(i):c()}function f(a){var c=q(this),e=a.data;(a=c.data("_ab_origs"))&&(a.rest=!0,setTimeout(function(){a.rest&&(d.call(c,!0),c.removeData("_ab_origs").prop("rows",a[0]).prop("cols",a[1]).prop("size",a[1]).css({"overflow-y":a[4],"overflow-x":a[5],resize:a[6]}),a={height:b(a[2]),width:a[3]},e.speed?c.animate(a,e.speed,function(){d.call(c)}):d.call(c.css(a)))},e.delay||10))}function g(){var a=c(this);return a.each(e),this}function h(a){var b=c(this);return a||(a={}),b.addClass(n).unbind(o),q.each(p,function(a,c){b.bind(c+o,e)}),a.permanent||b.bind("blur"+o,a,f),this}function i(a,b){var c=this;return b||(b={}),a||(a=m),c.off(o,a).addClass(n).on(p.join(o+" ")+o,a,e),b.permanent||c.on("blur"+o+" focusout"+o,a,b,f),this}var j,k,l,m="TEXTAREA",n="autoboxed",o=".dynSiz",p=["keypress","keyup","click","change","focusin","cut","paste"],q=a.jQuery||a.Zepto;("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(a,b){module.exports=b(q||require("jquery"))}:function(a,b){b(q)})([q?null:"jquery"],function(a){a.fn.autobox=g,a.fn.autoboxOn=i,a.fn.bindAutobox=h,a.autobox=function(b,c){return c=a.extend({},a.autobox.options,c),a(b).call(g)},a.autobox.options={permanent:!1},a.expr[":"].autobox=function(b){return a(b).hasClass(n)}})}(this);