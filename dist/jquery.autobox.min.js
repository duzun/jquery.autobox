/** Autogrow Textareas while typing
 *
 * https://github.com/duzun/jquery.autobox
 *
 * Copyright (c) 2016 Dumitru Uzun
 *
 * @license MIT
 * @version 2.2.2 - 2016-07-08
 * @author DUzun.Me
 */
!function(a){"use strict";function b(a,b){return(!a||(b=parseInt(a,10))&&b<18)&&(a="18px"),a}function c(a){return a.filter(m).add(a.find(m))}function d(a,b){var c=z(a),e=c.outerWidth(),f=c.outerHeight();if(a=c.get(0),b)j&&j!==a&&d(j),k=e,l=f,j=a;else if(j===a&&(l!=f||k!=e))return c.trigger("resize"),k=e,l=f,!0}function e(){function a(){if(h.data("_ab_origs")){n=g.rows;for(var b=g.scrollHeight,e=g.offsetHeight,f=0,i=b-e,j=e,k=n;f!=i&&b&&e;)if(f=i,i>0&&(h.prop("rows",Math.max(++n,(b*n/e>>0)-1,c)),b=g.scrollHeight,e=g.offsetHeight,i=b-e,k!=g.rows&&j==e)){h.css("overflow-y",""),h.prop("rows",k);break}i>5&&j!=e&&setTimeout(a,16),d(h)}}var c,e,f,g=this,h=z(g),i=h.data(),j=i._ab_origs,k=g.style,l=h.val(),m=l.split("\n"),n=h.prop("rows"),o=h.prop("cols"),p=0;for(d(h,!0),e=0,c=m.length;e<c;e++)(f=m[e].length)>p&&(p=f);if(j)j=i._ab_origs,delete j.rest;else{if(h.is(":hidden"))return;if(h.stop(!0),j=i._ab_origs=[n,o,k.height||h.css("height"),k.width||h.css("width"),h.css("overflow-y"),h.css("overflow-x"),h.css("resize")],j.aw=h.attr("width"),j.ah=h.attr("height"),e=0,j.ah||(e|=q),j.aw||(e|=r),0===e||e===(q|r))switch(h.prop("resize")||h.attr("resize")||j[y]){case"vertical":e=q;break;case"horizontal":e=r}if(j.ar=e){var w={resize:"none"};e===q&&(w["overflow-y"]="hidden",!j.aw&&(j.aw=j[v]),delete j.ah),e===r&&(w["overflow-x"]="hidden",!j.ah&&(j.ah=j[u]),delete j.aw),h.css(w)}h.data("_ab_origs",j)}l=l.length,m=j.ah||"auto",f=j.aw||"auto",j.nadj=~j.ar&q,p?(p+=5+(p>>4),c+=n>2||c>1,(c>n||l<j.tl&&j.ar&q)&&h.prop("rows",c)):(c<=1?(c=j[s],m=j[u],j.nadj=!0):c++,p=j[t],f=j[v],j.ar&q&&h.prop("rows",c)),j.ar&r&&h.prop("cols",p).prop("size",p),h.css({height:b(m),width:f}),j.tl=l,j.nadj?d(h):a()}function f(a){var c=z(this),e=a.data;(a=c.data("_ab_origs"))&&(a.rest=!0,setTimeout(function(){a.rest&&(d(c,!0),c.removeData("_ab_origs").prop("rows",a[s]).prop("cols",a[t]).prop("size",a[t]).css({"overflow-y":a[w],"overflow-x":a[x],resize:a[y]}),a={height:b(a[u]),width:a[v]},e.speed?c.animate(a,e.speed,function(){d(c)}):d(c.css(a)))},e.delay||250))}function g(){var a=c(this);return a.each(e),this}function h(a){var b=c(this);return a=z.extend({},z.autobox.options,a),b.addClass(n).off(o),z.each(p,function(a,c){b.on(c+o,e)}),a.permanent||b.on("blur"+o,a,f),this}function i(a,b){var c=this;return b=z.extend({},z.autobox.options,b),a||(a=m),c.off(o,a).addClass(n).on(p.join(o+" ")+o,a,e),b.permanent||c.on("blur"+o+" focusout"+o,a,b,f),c}var j,k,l,m="TEXTAREA",n="autoboxed",o=".dynSiz",p=["autobox","keypress","keyup","click","change","focusin","cut","paste"],q=1,r=2,s=0,t=1,u=2,v=3,w=4,x=5,y=6,z=a.jQuery||a.Zepto;("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(a,b){module.exports=b(z||require("jquery"))}:function(a,b){b(z)})([z?null:"jquery"],function(a){a.fn.autobox=g,a.fn.autoboxOn=i,a.fn.autoboxBind=h,a.fn.bindAutobox=h,a.autobox=function(b,c){return c=a.extend({},a.autobox.options,c),a(b).call(g)},a.autobox.options={permanent:!1},a.expr[":"].autobox=function(b){return a(b).hasClass(n)}})}(this);