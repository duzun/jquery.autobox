{"version":3,"file":"jquery.autobox.js","sources":["src/jquery.autobox.js"],"sourcesContent":["/**\n * Autogrow Textareas\n * jQuery.autobox\n *\n * https://github.com/duzun/jquery.autobox\n *\n * Copyright (c) 2018 Dumitru Uzun\n *\n *  @license The MIT license.\n *  @version 3.0.2\n *  @author DUzun.Me\n */\n\n/**\n *\n * Usage:\n *\n * $().\n *    autobox()        - Adjust Height/Width of all TEXTAREAs in this and it's descendants\n *    autoboxOn(sel)   - Bind Auto Height/Width Adjustment events to matched element, listening on sel elements\n *    autoboxBind()    - Bind Auto Height/Width Adjustment events to all TEXTAREAs in this and it's descendants\n */\n\n/*jshint\n    esversion: 6,\n    browser: true\n*/\n\nconst TEXTAREA = 'TEXTAREA';\nconst autoboxedClass = 'autoboxed';\nconst namespace = '.dynSiz';\n\nconst _events = [\n        'autobox'\n      , 'keypress'\n      , 'keyup'\n      , 'click'\n      , 'change'\n      , 'focusin'\n      , 'cut'\n      , 'paste'\n    ]\n;\n\n// Constants for internal use\nconst RESIZE_VERTICAL_FLAG   = 1;\nconst RESIZE_HORIZONTAL_FLAG = 2;\n\nconst ROWS_POS       = 0;\nconst COLS_POS       = 1;\nconst HEIGHT_POS     = 2;\nconst WIDTH_POS      = 3;\nconst OVERFLOW_Y_POS = 4;\nconst OVERFLOW_X_POS = 5;\nconst RESIZE_POS     = 6;\n\nexport default function init($) {\n    var cchChkElement;\n    var cchChkWidth;\n    var cchChkHeight;\n\n    function taMH(h,i) {\n        if ( !h || ( (i=parseInt(h, 10)) && i < 18 ) ) {\n            h = '18px';\n        }\n        return h;\n    }\n\n    function findTEXTAREA(ctx) {\n        return ctx.filter(TEXTAREA).add(ctx.find(TEXTAREA));\n    }\n\n    function chkSize(s, save) {\n        var t = $(s)\n        ,   w = t.outerWidth()\n        ,   h = t.outerHeight()\n        ;\n        s = t.get(0);\n        if ( save ) {\n            if ( cchChkElement && cchChkElement !== s ) {\n                chkSize(cchChkElement);\n            }\n            cchChkWidth   = w;\n            cchChkHeight  = h;\n            cchChkElement = s;\n        }\n        else {\n            if ( cchChkElement === s ) {\n                if ( cchChkHeight != h || cchChkWidth != w ) {\n                    t.trigger('resize');\n                    cchChkWidth  = w;\n                    cchChkHeight = h;\n                    return true;\n                }\n            }\n        }\n    }\n\n    function taBoxAdj(evt) {\n        var t  = this\n        ,   o  = $(t)\n        ,   d  = o.data()\n        ,   e  = d._ab_origs\n        ,   s  = t.style\n        ,   ol = o.val()\n        ,   v  = ol.split('\\n')\n        ,   ar = o.prop('rows')\n        ,   ac = o.prop('cols')\n        ,   c  = 0\n        ,   r, i, l\n        ,   opt = evt && evt.type && evt.data\n        ;\n\n        chkSize(o, true);\n\n        for ( i=0,r=v.length; i<r; i++ ) {\n            if ( (l=v[i].length) > c ) {\n                c = l;\n            }\n        }\n\n        // On first call, backup original metric properties\n        if ( !e ) {\n            // Can't init when hidden - all metrics are zero\n            if ( o.is(':hidden') ) {\n                return;\n            }\n            o.stop(true);\n            e = d._ab_origs = [\n                ar\n              , ac\n              , s.height || o.css('height')\n              , s.width  || o.css('width')\n              , o.css('overflow-y')\n              , o.css('overflow-x')\n              , o.css('resize')\n            ];\n            e.aw = o.attr('width');\n            e.ah = o.attr('height');\n            i = 0;\n            if(!e.ah) { i |= RESIZE_VERTICAL_FLAG;   }\n            if(!e.aw) { i |= RESIZE_HORIZONTAL_FLAG; }\n\n            // use ar\n            if( i === 0 || i === (RESIZE_VERTICAL_FLAG | RESIZE_HORIZONTAL_FLAG) ) {\n                // resize option overrides CSS and DOM property\n                switch(opt && opt.resize || o.prop('resize') || o.attr('resize') || e[RESIZE_POS]) {\n                    case 'vertical':   i = RESIZE_VERTICAL_FLAG  ; break;\n                    case 'horizontal': i = RESIZE_HORIZONTAL_FLAG; break;\n                }\n            }\n            if ( e.ar = i ) {\n                var css = { resize: 'none' };\n                if(i === RESIZE_VERTICAL_FLAG  ) {\n                    css['overflow-y'] = 'hidden';\n                    !e.aw && (e.aw = e[WIDTH_POS]);\n                    delete e.ah;\n                }\n                if(i === RESIZE_HORIZONTAL_FLAG) {\n                    css['overflow-x'] = 'hidden';\n                    !e.ah && (e.ah = e[HEIGHT_POS]);\n                    delete e.aw;\n                }\n                o.css(css);\n            }\n            // Ensure data is saved\n            o.data('_ab_origs', e);\n        }\n\n        // Not first call\n        else {\n            e = d._ab_origs;\n            delete e.rest;\n        }\n\n        ol = ol.length;\n        v = e.ah || 'auto';\n        l = e.aw || 'auto';\n        e.nadj = ~e.ar & RESIZE_VERTICAL_FLAG;\n\n        if(!c) {\n            if(r <= 1) {\n                r = e[ROWS_POS];\n                v = e[HEIGHT_POS];\n                e.nadj = true;\n            }\n            else {\n                r++;\n            }\n            c = e[COLS_POS];\n            l = e[WIDTH_POS];\n            (e.ar & RESIZE_VERTICAL_FLAG) && o.prop('rows', r);\n        }\n        else {\n            c += 5 + (c>>4);\n            r += ar > 2 || r > 1;\n            (r > ar || ol < e.tl && (e.ar & RESIZE_VERTICAL_FLAG)) && o.prop('rows', r);\n        }\n        (e.ar & RESIZE_HORIZONTAL_FLAG) && o.prop('cols', c).prop('size', c);\n        o.css({'height':taMH(v),'width':l});\n        e.tl = ol;\n\n        function adjRows() {\n            if(!o.data('_ab_origs')) return;\n            ar = t.rows;\n            var s = t.scrollHeight\n            ,   h = t.offsetHeight\n            ,   d = 0\n            ,   a = s - h\n            ,   ih = h\n            ,   ir = ar\n            ;\n            for(;d != a && s && h;) {\n                // if(d == a || !s || !h) break;\n                d = a;\n                if(a > 0) {\n                    o.prop('rows', Math.max(++ar, (s*ar/h>>0)-1, r));\n                    s = t.scrollHeight;\n                    h = t.offsetHeight;\n                    a = s - h;\n                    // If rows changed but height not, seems there is some limitation on height (ex max-height)\n                    if(ir != t.rows && ih == h) {\n                        o.css('overflow-y', '');\n                        o.prop('rows', ir);\n                        break;\n                    }\n                }\n            }\n            // if need to adjust height and it changed, try to change it after a delay\n            if(a > 5 && ih != h) setTimeout(adjRows, 16);\n\n            chkSize(o);\n        }\n\n        e.nadj ? chkSize(o) : adjRows();\n    }\n\n    function taRestoreBox(e) {\n        var o = $(this)\n        ,   d = e.data\n        ;\n        if(e=o.data('_ab_origs')) {\n            e.rest = true;\n            setTimeout(function () {\n                if(!e.rest) { return; }\n                chkSize(o, true);\n                o.removeData('_ab_origs')\n                 .prop('rows', e[ROWS_POS]) // for textarea\n                 .prop('cols', e[COLS_POS]) // for textarea\n                 .prop('size', e[COLS_POS]) // for input\n                 .css({\n                    'overflow-y': e[OVERFLOW_Y_POS]\n                  , 'overflow-x': e[OVERFLOW_X_POS]\n                  , 'resize'    : e[RESIZE_POS]\n                });\n                e = {\n                    'height': taMH(e[HEIGHT_POS])\n                  , 'width' : e[WIDTH_POS]\n                };\n\n                if(d.speed) {\n                    o.animate(e, d.speed, function () {\n                        chkSize(o);\n                    });\n                }\n                else {\n                    chkSize(o.css(e));\n                }\n            }, d.delay||250); // bigger delay to allow for clicks on element beneath textarea\n        }\n    }\n\n    function autoBox() {\n        var o = findTEXTAREA(this) ;\n        o.each(taBoxAdj);\n        return this;\n    }\n\n    function autoboxBind(opt) {\n        var o = findTEXTAREA(this) ;\n        opt = $.extend({}, $.autobox.options, opt);\n        o\n         .addClass(autoboxedClass)\n         .off(namespace);\n        $.each(_events, function (i,e) {\n            o.on(e+namespace, opt, taBoxAdj);\n        });\n        if ( !opt.permanent ) {\n            o.on('blur'+namespace, opt, taRestoreBox);\n        }\n        return this;\n    }\n\n    function autoBoxOn(sel, opt) {\n        var o = this;\n        opt = $.extend({}, $.autobox.options, opt);\n        sel || (sel = TEXTAREA);\n        o.off(namespace, sel)\n         .addClass(autoboxedClass)\n         .on(\n            _events.join(namespace+' ')+namespace\n            , sel\n            , opt\n            , taBoxAdj\n          )\n        ;\n\n        if ( !opt.permanent ) {\n            o.on('blur'+namespace+' '+'focusout'+namespace, sel, opt, taRestoreBox) ;\n        }\n\n        return o;\n    }\n\n// Export:\n\n    // Collection methods.\n    $.fn.autobox     = autoBox     ;\n    $.fn.autoboxOn   = autoBoxOn   ;\n    $.fn.autoboxBind = autoboxBind ;\n\n    // Alias\n    $.fn.bindAutobox = autoboxBind ;\n\n    // Static method.\n    $.autobox = function(elements, options) {\n      // Override default options with passed-in options.\n      options = $.extend({}, $.autobox.options, options);\n      // Return something awesome.\n      return $(elements).call(autoBox);\n    };\n\n    // Static method default options.\n    $.autobox.options = {\n      resize: undefined, // 'vertical' | 'horizontal'\n      permanent: false\n    };\n\n    // Custom selector.\n    $.expr[':'].autobox = function(elem) {\n      // Is this element awesome?\n      return $(elem).hasClass(autoboxedClass);\n    };\n}\n\nif ( typeof window !== 'undefined' ) {\n    const $ = window.jQuery || window.Zepto;\n    if ( $ ) init($);\n}\n"],"names":["TEXTAREA","autoboxedClass","namespace","_events","RESIZE_VERTICAL_FLAG","RESIZE_HORIZONTAL_FLAG","ROWS_POS","COLS_POS","HEIGHT_POS","WIDTH_POS","OVERFLOW_Y_POS","OVERFLOW_X_POS","RESIZE_POS","init","$","cchChkElement","cchChkWidth","cchChkHeight","taMH","h","i","parseInt","findTEXTAREA","ctx","filter","add","find","chkSize","s","save","t","w","outerWidth","outerHeight","get","trigger","taBoxAdj","evt","o","d","data","e","_ab_origs","style","ol","val","v","split","ar","prop","ac","c","r","l","opt","type","length","is","stop","height","css","width","aw","attr","ah","resize","rest","nadj","tl","adjRows","rows","scrollHeight","offsetHeight","a","ih","ir","Math","max","setTimeout","taRestoreBox","removeData","speed","animate","delay","autoBox","each","autoboxBind","extend","autobox","options","addClass","off","on","permanent","autoBoxOn","sel","join","fn","autoboxOn","bindAutobox","elements","call","undefined","expr","elem","hasClass","window","jQuery","Zepto"],"mappings":"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"}